import{av as R,R as S,ae as A,ad as q,S as D,G as E,c as f,Y as o,$ as m,X as s,L as e,aw as v,ai as n,W as V,_ as j,O as k,af as u,ag as h,aR as F,V as G,aj as O,am as P}from"./index-D6ECr1LD.js";import{V as d,a as T,b as g}from"./route-block-DSL8kWPQ.js";import{V as y}from"./VDivider-gvZ5pheJ.js";import{V as U,a as W}from"./VList-BK0FbmeS.js";import{V as X}from"./VContainer-BtDl52fG.js";const Y={class:"text-center"},C={__name:"cart",setup(z){const{apiAuth:l}=P(),i=S(),b=A(),w=q(),{t:x}=D(),c=E([]),p=async()=>{try{const{data:a}=await l.get("/user/cart");c.value=a.result}catch(a){console.log(a)}};p();const B=f(()=>c.value.reduce((a,r)=>a+r.product.price*r.quantity,0)),$=f(()=>c.value.length>0&&c.value.every(a=>a.product.sell)),_=async(a,r)=>{try{const{data:t}=await l.patch("/user/cart",{product:a,quantity:r});i.cart=t.result,p()}catch(t){console.log(t)}},I=async()=>{var a,r;try{await l.post("/order"),i.cart=0,b.push("/orders")}catch(t){console.log(t),w({text:x("api."+(((r=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:r.message)||"unknownError")),snackbarProps:{color:"red"}})}};return(a,r)=>(o(),m(X,null,{default:s(()=>[e(T,null,{default:s(()=>[e(d,{cols:"12"},{default:s(()=>[v("h1",Y,n(a.$t("nav.cart")),1)]),_:1}),e(y),e(d,{cols:"12"},{default:s(()=>[e(U,{lines:"two"},{default:s(()=>[(o(!0),V(k,null,j(c.value,(t,L)=>(o(),V(k,{key:t._id},[e(W,{title:t.product.name,subtitle:t.product.price,"active-class":"bg-red",active:!t.product.sell},{prepend:s(()=>[e(F,{rounded:"0"},{default:s(()=>[e(G,{src:t.product.image},null,8,["src"])]),_:2},1024)]),append:s(()=>[e(u,{icon:"mdi-minus",class:"me-2 btnn",onClick:N=>_(t.product._id,-1)},null,8,["onClick"]),h(" "+n(t.quantity)+" ",1),e(u,{icon:"mdi-plus",class:"ms-2 btnn",onClick:N=>_(t.product._id,1)},null,8,["onClick"])]),_:2},1032,["title","subtitle","active"]),L<c.value.length-1?(o(),m(y,{key:0})):O("",!0)],64))),128))]),_:1})]),_:1}),e(d,{cols:"12",class:"text-center"},{default:s(()=>[v("p",null,n(B.value),1),e(u,{color:"primary",disabled:!$.value,onClick:I},{default:s(()=>[h(n(a.$t("cart.checkout")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}))}};typeof g=="function"&&g(C);const Z=R(C,[["__scopeId","data-v-1e69e04e"]]);export{Z as default};
