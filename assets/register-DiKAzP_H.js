import{S as C,ad as q,ae as M,Y as P,$ as T,X as l,L as t,aw as V,ai as w,Z as e,aN as E,au as i,af as N,ag as R,am as B}from"./index-D6ECr1LD.js";import{c as F,a as n,f as U,u as _,e as m,V as I}from"./index.esm-DqUdbILg.js";import{v as b}from"./index-B-eotSSk.js";import{V as h,a as L,b as S}from"./route-block-DSL8kWPQ.js";import{V as D}from"./VDivider-gvZ5pheJ.js";import{V as O}from"./VContainer-BtDl52fG.js";const X={class:"text-center"},Y={class:"text-center"},Z={__name:"register",setup(j){const{t:s}=C(),{api:$}=B(),v=q(),x=M(),y=F({account:n().required(s("api.userAccountRequired")).min(4,s("api.userAccountTooShort")).max(20,s("api.userAccountTooLong")).test("isAlphanumeric",s("api.userAccountInvalid"),a=>b.isAlphanumeric(a)),email:n().required(s("api.userEmailRequired")).test("isEmail",s("api.userEmailInvalid"),a=>b.isEmail(a)),password:n().required(s("api.userPasswordRequired")).min(4,s("api.userPasswordTooShort")).max(20,s("api.userPasswordTooLong")),passwordConfirm:n().oneOf([U("password")],s("api.userPasswordNotMatch"))}),{handleSubmit:k,isSubmitting:f}=_({validationSchema:y}),d=m("account"),c=m("email"),p=m("password"),g=m("passwordConfirm"),A=k(async a=>{var o,r;try{await $.post("/user",{account:a.account,email:a.email,password:a.password}),v({text:s("register.success"),snackbarProps:{color:"green"}}),x.push("/login")}catch(u){console.log(u),v({text:s("api."+((r=(o=u==null?void 0:u.response)==null?void 0:o.data)==null?void 0:r.message)||"unknownError"),snackbarProps:{color:"red"}})}});return(a,o)=>(P(),T(O,null,{default:l(()=>[t(L,null,{default:l(()=>[t(h,{cols:"12"},{default:l(()=>[V("h1",X,w(a.$t("nav.register")),1)]),_:1}),t(D),t(h,{cols:"12"},{default:l(()=>[t(I,{disabled:e(f),onSubmit:E(e(A),["prevent"])},{default:l(()=>[t(i,{modelValue:e(d).value.value,"onUpdate:modelValue":o[0]||(o[0]=r=>e(d).value.value=r),"error-messages":e(d).errorMessage.value,label:a.$t("user.account"),counter:"",minlength:"4",maxlength:"20"},null,8,["modelValue","error-messages","label"]),t(i,{modelValue:e(c).value.value,"onUpdate:modelValue":o[1]||(o[1]=r=>e(c).value.value=r),"error-messages":e(c).errorMessage.value,label:a.$t("user.email")},null,8,["modelValue","error-messages","label"]),t(i,{modelValue:e(p).value.value,"onUpdate:modelValue":o[2]||(o[2]=r=>e(p).value.value=r),type:"password",autocomplete:"","error-messages":e(p).errorMessage.value,label:a.$t("user.password"),counter:"",minlength:"4",maxlength:"20"},null,8,["modelValue","error-messages","label"]),t(i,{modelValue:e(g).value.value,"onUpdate:modelValue":o[3]||(o[3]=r=>e(g).value.value=r),type:"password",autocomplete:"","error-messages":e(g).errorMessage.value,label:a.$t("user.passwordConfirm"),counter:"",minlength:"4",maxlength:"20"},null,8,["modelValue","error-messages","label"]),V("div",Y,[t(N,{loading:e(f),type:"submit",color:"primary"},{default:l(()=>[R(w(a.$t("register.submit")),1)]),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};typeof S=="function"&&S(Z);export{Z as default};
